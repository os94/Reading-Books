# Ch 14. 함수형 프로그래밍 기법

Java 8 in Action :: Contents

고차원 함수, 커링, 영구 자료구조, 게으른 리스트, 패턴 매칭, 참조 투명성을 이용한 캐싱, 콤비네이터 등을 살펴본다

일급 함수 : 인수로 전달하거나, 결과로 반환하거나, 자료구조에 저장할 수 있는 함수

### 고차원 함수 (higher-order fn)

- 하나 이상의 함수를 인수로 받거나, 함수를 결과로 반환하는 함수
- ex : comparing, andThen, compose 등

### 커링

함수를 모듈화하고 코드를 재사용하는데 도움을 주는 기법

- 이론적 정의 : x와y라는 두 인수를 받는 함수 f를 한개의 인수를 받는 g라는 함수로 대체하는 기법. g 역시 하나의 인수를 받는 함수를 반환하며, 최종적으로 f(x,y) = (g(x))(y)의 형태가 된다

참고 : `커링 개념을 활용해 변환 함수 팩토리를 정의하는 예제 코드`

### 영속 자료구조

DB의 프로그램 종료 후에도 남아있음을 의미하는 '영속'과는 다른 의미이다.

함수형 프로그래밍에서 사용하는 자료구조를 살펴보자. 함수형 메서드에선 전역 자료구조나 인수로 전달된 구조를 갱신할 수 없다. 같은 메서드를 두번 호출했을 때, 참조 투명성에 위배되기 때문이다.

영속 자료구조는 갱신될 때 기존 버전의 자신을 보존한다.

`TrainJourney` 와 `Tree` 예제를 보면 파괴적인 갱신과 vs 함수형의 차이를 볼 수 있다.

- 영속 (persistent) : 저장된 값이 다른 누군가에 의해 영향을 받지 않는 상태

스트림은 한번만 소비할수있으므로 재귀적으로 정의할 수 없다.

### 게으른 리스트

- 자바 스트림보다 비싼 버전, 데이터를 요청했을 때 Supplier를 이용해 요소를 생성한다.

자바8의 스트림은 게을러서, 스트림의 연산은 바로 수행되지않고 저장되었다가, 최종연산시에만 이뤄진다.

좀더 일반적인 형태의 스트림인 게으른 리스트는 고차원 함수도 지원하고, 함수값을 자료구조에 저장해 함수값을 사용하지 않은 상태로 보관할 수 도 있다.

제공하는 유용성 : 함수를 자료구조 내부로 추가할 수 있고, 이런 함수를 자료구조를 만드는 시점이 아닌 요청 시점에 실행시킬 수 있다. 예를 들어, 체스의 모든 움직임 가능성을 표현하는 트리 자료구조처럼, 미리 계산하기엔 너무 큰 자료구조를 준비하고 요청시에만 생성할 수 있다.

### 패턴 매칭

(정규표현식의 패턴 매칭과 다른 것)